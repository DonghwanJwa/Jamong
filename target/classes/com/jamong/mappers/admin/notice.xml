<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="notice">
	<!-- 공지 개수 -->
	<select id="n_count" resultType="int">
		select count(noti_no) from adm_notice
		
		<where>
			<if test="search_field == ''"></if>
			
			<if test="search_field == 'noti_title'">
				noti_title like #{search_name}
			</if>
			
			<if test="search_field == 'noti_name'">
				noti_name like #{search_name}
			</if>
			
			<if test="search_field == 'noti_cont'">
				noti_cont like #{search_name}
			</if>
		</where>
	</select>
	
	<!-- 공지 목록 -->
	<select id="n_list" resultType="notice">
		select * from (select rowNum rNum,noti_no,noti_title,noti_name,noti_hit,noti_date from (select * from adm_notice
		
		<where>
			<if test="search_field == ''"></if>
			
			<if test="search_field == 'noti_title'">
				noti_title like #{search_name}
			</if>
			
			<if test="search_field == 'noti_name'">
				noti_name like #{search_name}
			</if>
			
			<if test="search_field == 'noti_cont'">
				noti_cont like #{search_name}
			</if>
		</where>
		order by noti_date desc)) where rNum &gt;= #{startrow} and rNum &lt;= #{endrow}
	</select>
	
	<!-- 공지사항 저장 -->
	<insert id="n_insert">
		insert into adm_notice(noti_no,noti_title,noti_name,noti_pwd,noti_cont,noti_date)
	</insert>
</mapper>